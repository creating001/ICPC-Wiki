# nim游戏

> 板子题网址: https://www.luogu.com.cn/problem/P2197

给定 $N$ 堆物品，第 $i$ 堆物品有 $Ai$ 个。两名玩家轮流行动，每次可以任选一堆，取走任意多个物品，可把一堆取光，但不能不取。取走最后一件物品者获胜。两人都采取最优策略，问先手是否必胜。

我们把这种游戏称为 $NIM$ 博弈。把游戏过程中面临的状态称为局面。整局游戏第一个行动的称为先手，第二个行动的称为后手。若在某一局面下无论采取何种行动，都会输掉游戏，则称该局面必败。

所谓采取最优策略是指，若在某一局面下存在某种行动，使得行动后对面面临必败局面，则优先采取该行动。同时，这样的局面被称为必胜。我们讨论的博弈问题一般都只考虑理想情况，即两人均无失误，都采取最优策略行动时游戏的结果。

$NIM$ 博弈不存在平局，只有先手必胜和先手必败两种情况。

定理： $NIM$ 博弈先手必胜，当且仅当 $A1 \oplus A2 \oplus ... \oplus An \neq 0$ 。
